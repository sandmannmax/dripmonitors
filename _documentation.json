{
  "paths": {
    "/scope": {
      "get": {
        "description": "Get Users scope",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Monitors",
            "schema": {
              "type": "object",
              "properties": {
                "scope": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "post": {
        "description": "Set User Scope to Beta-Tester",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Set User Scope to Beta-Tester",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/monitor": {
      "get": {
        "description": "Get all Monitors",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Monitors",
            "schema": {
              "type": "object",
              "properties": {
                "monitors": {
                  "type": "array",
                  "objects": {
                    "$ref": "#/definitions/Monitor"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "description": "Create new Monitor",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Created Monitor",
            "schema": {
              "type": "object",
              "properties": {
                "monitor": {
                  "$ref": "#/definitions/Monitor"
                }
              }
            }
          }
        }
      }
    },
    "/monitor/$id": {
      "patch": {
        "description": "Update the Monitor",
        "parameters": [
          {
            "name": "webHook",
            "in": "body",
            "description": "Updated webHook",
            "required": false,
            "type": "string"
          },
          {
            "name": "botName",
            "in": "body",
            "description": "Updated botName",
            "required": false,
            "type": "string"
          },
          {
            "name": "botImage",
            "in": "body",
            "description": "Updated botImage",
            "required": false,
            "type": "string"
          },
          {
            "name": "running",
            "in": "body",
            "description": "Updated running State",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "Updated Monitor",
            "schema": {
              "type": "object",
              "properties": {
                "monitor": {
                  "$ref": "#/definitions/Monitor"
                }
              }
            }
          },
          "404": {
            "description": "Monitor is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "delete": {
        "description": "Delete the Monitor",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successfully deleted Monitor Object"
          },
          "404": {
            "description": "Monitor is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/monitor/$id/source": {
      "get": {
        "description": "Get all Monitorsources connected to this Monitor",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Get all Monitorsources",
            "schema": {
              "type": "object",
              "properties": {
                "monitorsources": {
                  "type": "array",
                  "objects": {
                    "$ref": "#/definitions/Monitorsource"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "description": "Create new Monitorsource",
        "parameters": [
          {
            "name": "productId",
            "in": "body",
            "description": "Product as source",
            "required": false,
            "type": "string"
          },
          {
            "name": "monitorpageId",
            "in": "body",
            "description": "Monitorpage as source",
            "required": false,
            "type": "string"
          },
          {
            "name": "all",
            "in": "body",
            "description": "Sending everything to this monitor",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "Created Monitorsource",
            "schema": {
              "type": "object",
              "properties": {
                "monitorsource": {
                  "$ref": "#/definitions/Monitorsource"
                }
              }
            }
          }
        }
      }
    },
    "/monitor/$id/source/$id": {
      "delete": {
        "description": "Delete the Monitorsource",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successfully deleted Monitorsource"
          },
          "404": {
            "description": "Monitorsource is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/monitor/$id/testmessage": {
      "post": {
        "description": "Send Testmessage to Webhook for Monitor",
        "parameters": [
          {
            "name": "id",
            "in": "url",
            "description": "id of Monitor",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Message sent"
          },
          "400": {
            "description": "Monitor Webhook is not configured",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "Monitor is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/monitorpage": {
      "get": {
        "description": "Get all visible Monitorpages",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Monitorpages",
            "schema": {
              "type": "object",
              "properties": {
                "monitors": {
                  "type": "array",
                  "objects": {
                    "$ref": "#/definitions/Monitorpage"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/product": {
      "get": {
        "description": "Get all Products",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Products",
            "schema": {
              "type": "object",
              "properties": {
                "products": {
                  "type": "array",
                  "objects": {
                    "$ref": "#/definitions/Product"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/admin/monitorpage": {
      "get": {
        "description": "Get all Monitorpages",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Monitorpages",
            "schema": {
              "type": "object",
              "properties": {
                "monitors": {
                  "type": "array",
                  "objects": {
                    "$ref": "#/definitions/Monitorpage"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "description": "Create Monitorpage",
        "parameters": [
          {
            "name": "techname",
            "in": "body",
            "description": "name of monitorpage for the queue",
            "required": true,
            "type": "string"
          },
          {
            "name": "name",
            "in": "body",
            "description": "Name of monitorpage",
            "required": true,
            "type": "string"
          },
          {
            "name": "cc",
            "in": "body",
            "description": "CC of monitorpage",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Created Monitorpage",
            "schema": {
              "type": "object",
              "properties": {
                "monitorpage": {
                  "$ref": "#/definitions/Monitorpage"
                }
              }
            }
          }
        }
      }
    },
    "/admin/monitorpage/$id": {
      "patch": {
        "description": "Update Monitorpage",
        "parameters": [
          {
            "name": "techname",
            "in": "body",
            "description": "name of monitorpage for the queue",
            "required": false,
            "type": "string"
          },
          {
            "name": "name",
            "in": "body",
            "description": "Name of monitorpage",
            "required": false,
            "type": "string"
          },
          {
            "name": "visible",
            "in": "body",
            "description": "Visible to users",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "cc",
            "in": "body",
            "description": "CC of monitorpage",
            "required": false,
            "type": "string"
          },
          {
            "name": "monitorpageconfigId",
            "in": "body",
            "description": "id of monitorpageconfig for monitorpage",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Updated Monitorpage",
            "schema": {
              "type": "object",
              "properties": {
                "monitorpage": {
                  "$ref": "#/definitions/Monitorpage"
                }
              }
            }
          },
          "404": {
            "description": "Monitorpage is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "delete": {
        "description": "Delete Monitorpage",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successfully deleted Monitorsource"
          },
          "404": {
            "description": "Monitorpage is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/admin/monitorpage/$id/url": {
      "get": {
        "description": "Get all Urls",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Urls",
            "schema": {
              "type": "object",
              "properties": {
                "urls": {
                  "type": "array",
                  "objects": {
                    "$ref": "#/definitions/UrlElement"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "description": "Create Url",
        "parameters": [
          {
            "name": "url",
            "in": "body",
            "description": "url to monitor",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Created Url",
            "schema": {
              "type": "object",
              "properties": {
                "url": {
                  "$ref": "#/definitions/UrlElement"
                }
              }
            }
          }
        }
      }
    },
    "/admin/monitorpage/$id/url/$id": {
      "patch": {
        "description": "Update Url",
        "parameters": [
          {
            "name": "url",
            "in": "body",
            "description": "url to monitor",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Updated Url",
            "schema": {
              "type": "object",
              "properties": {
                "url": {
                  "$ref": "#/definitions/UrlElement"
                }
              }
            }
          },
          "404": {
            "description": "Url is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "delete": {
        "description": "Delete Url",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successfully deleted Url"
          },
          "404": {
            "description": "Url is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/admin/monitorpage/$id/start": {
      "post": {
        "description": "Start Monitorpage",
        "parameters": [
          {
            "name": "interval",
            "in": "body",
            "description": "Interval to run Monitorpage",
            "required": true,
            "type": "number"
          }
        ],
        "responses": {
          "200": {
            "description": "Started Monitorpage"
          },
          "404": {
            "description": "Monitorpage is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/admin/monitorpage/$id/stop": {
      "post": {
        "description": "Start Monitorpage",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Stopped Monitorpage"
          },
          "404": {
            "description": "Monitorpage is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/admin/monitorpage/$id/test": {
      "post": {
        "description": "Test Monitorpage",
        "parameters": [
          {
            "name": "reloadContent",
            "in": "body",
            "description": "flag if scraper should reload the content",
            "required": true,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "Productresults",
            "schema": {
              "type": "object",
              "properties": {
                "products": {
                  "type": "array",
                  "objects": {
                    "$ref": "#/definitions/ProductResult"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Monitorpage is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/admin/monitorpageconfig": {
      "get": {
        "description": "Get all Monitorpageconfigs",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Monitorpageconfigs",
            "schema": {
              "type": "object",
              "properties": {
                "monitorpageconfigs": {
                  "type": "array",
                  "objects": {
                    "$ref": "#/definitions/Monitorpageconfig"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "description": "Create Monitorpageconfig",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Created Monitorpageconfig",
            "schema": {
              "type": "object",
              "properties": {
                "monitorpage": {
                  "$ref": "#/definitions/Monitorpageconfig"
                }
              }
            }
          }
        }
      }
    },
    "/admin/monitorpageconfig/$id": {
      "patch": {
        "description": "Update Monitorpageconfig",
        "parameters": [
          {
            "name": "isHtml",
            "in": "body",
            "description": "",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "allSizesAvailable",
            "in": "body",
            "description": "",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "soldOutCheckSizes",
            "in": "body",
            "description": "",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "hasParentProducts",
            "in": "body",
            "description": "",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "hasChildProducts",
            "in": "body",
            "description": "",
            "required": false,
            "type": "body"
          }
        ],
        "responses": {
          "200": {
            "description": "Updated Monitorpageconfig",
            "schema": {
              "type": "object",
              "properties": {
                "monitorpage": {
                  "$ref": "#/definitions/Monitorpageconfig"
                }
              }
            }
          },
          "404": {
            "description": "Url is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "delete": {
        "description": "Delete Monitorpageconfig",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successfully deleted Monitorpageconfig"
          },
          "404": {
            "description": "Monitorpageconfig is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/admin/monitorpageconfig/$id/processconfig/$id": {
      "patch": {
        "description": "Update Processconfig",
        "parameters": [
          {
            "name": "hasConstant",
            "in": "body",
            "description": "",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "constant",
            "in": "body",
            "description": "",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "Updated Processconfig",
            "schema": {
              "type": "object",
              "properties": {
                "processconfig": {
                  "$ref": "#/definitions/Processconfig"
                }
              }
            }
          },
          "404": {
            "description": "Processconfig is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/admin/monitorpageconfig/$id/processconfig/$id/pipe": {
      "post": {
        "description": "Create Pipeelement",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Created Pipeelement",
            "schema": {
              "type": "object",
              "properties": {
                "pipeelement": {
                  "$ref": "#/definitions/Pipeelement"
                }
              }
            }
          }
        }
      }
    },
    "/admin/monitorpageconfig/$id/processconfig/$id/pipe/$id": {
      "patch": {
        "description": "Update Pipeelement",
        "parameters": [
          {
            "name": "command",
            "in": "body",
            "description": "",
            "required": false,
            "type": "string"
          },
          {
            "name": "order",
            "in": "body",
            "description": "",
            "required": false,
            "type": "number"
          }
        ],
        "responses": {
          "200": {
            "description": "Updated Pipeelement",
            "schema": {
              "type": "object",
              "properties": {
                "pipeelement": {
                  "$ref": "#/definitions/Pipeelement"
                }
              }
            }
          },
          "404": {
            "description": "Pipeelement is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "delete": {
        "description": "Delete Pipeelement",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successfully deleted Pipeelement"
          },
          "404": {
            "description": "Pipeelement is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/admin/proxy": {
      "get": {
        "description": "Get all Proxies",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Proxies",
            "schema": {
              "type": "object",
              "properties": {
                "proxies": {
                  "type": "array",
                  "objects": {
                    "$ref": "#/definitions/Proxy"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "description": "Create Proxy",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Created Proxy",
            "schema": {
              "type": "object",
              "properties": {
                "proxy": {
                  "$ref": "#/definitions/Proxy"
                }
              }
            }
          }
        }
      }
    },
    "/admin/proxy/$id": {
      "patch": {
        "description": "Update Proxy",
        "parameters": [
          {
            "name": "address",
            "in": "body",
            "description": "updated address",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Updated Proxy",
            "schema": {
              "type": "object",
              "properties": {
                "proxy": {
                  "$ref": "#/definitions/Proxy"
                }
              }
            }
          },
          "404": {
            "description": "Proxy is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "delete": {
        "description": "Delete Proxy",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successfully deleted Proxy"
          },
          "404": {
            "description": "Proxy is not existing",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "Monitor": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "webHook": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "imageUrl": {
          "type": "string"
        },
        "running": {
          "type": "boolean"
        }
      }
    },
    "Monitorsource": {
      "type": "object",
      "properties": {
        "product?": {
          "$ref": "#/definitions/Product"
        },
        "monitorpage?": {
          "$ref": "#/definitions/Monitorpage"
        },
        "all": {
          "type": "boolean"
        }
      }
    },
    "Product": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "monitorpage": {
          "$ref": "#/definitions/Monitorpage"
        }
      }
    },
    "Monitorpage": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "techname": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "visible": {
          "type": "boolean"
        },
        "running": {
          "type": "boolean"
        },
        "interval": {
          "type": "number"
        },
        "cc": {
          "type": "string"
        },
        "ulrs": {
          "type": "array",
          "objects": {
            "$ref": "#/definitions/UrlElement"
          }
        },
        "monitorpageconfig": {
          "$ref": "#/definitions/Monitorpageconfig"
        }
      }
    },
    "Proxy": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "address": {
          "type": "string"
        },
        "cc": {
          "type": "string"
        },
        "cooldowns": {
          "type": "array",
          "objects": {
            "$ref": "#/definitions/Proxycooldown"
          }
        }
      }
    },
    "Proxycooldown": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "monitorpage": {
          "$ref": "#/definitions/Monitorpage"
        },
        "count": {
          "type": "number"
        },
        "remaining": {
          "type": "number"
        }
      }
    },
    "ProductResult": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "href": {
          "type": "string"
        },
        "img": {
          "type": "string"
        },
        "price": {
          "type": "string"
        },
        "soldOut": {
          "type": "boolean"
        },
        "active": {
          "type": "boolean"
        },
        "hasSizes": {
          "type": "boolean"
        },
        "sizes": {
          "type": "array",
          "objects": {
            "type": "string"
          }
        },
        "sizesSoldOut": {
          "type": "array",
          "objects": {
            "type": "booleab"
          }
        }
      }
    },
    "Monitorpageconfig": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "isHtml": {
          "type": "boolean"
        },
        "allSizesAvailable": {
          "type": "boolean"
        },
        "soldOutCheckSizes": {
          "type": "boolean"
        },
        "hasParentProducts": {
          "type": "boolean"
        },
        "hasChildProducts": {
          "type": "boolean"
        },
        "productsConfig": {
          "$ref": "#/definitions/Processconfig"
        },
        "idConfig": {
          "$ref": "#/definitions/Processconfig"
        },
        "nameConfig": {
          "$ref": "#/definitions/Processconfig"
        },
        "hrefConfig": {
          "$ref": "#/definitions/Processconfig"
        },
        "imgConfig": {
          "$ref": "#/definitions/Processconfig"
        },
        "priceConfig": {
          "$ref": "#/definitions/Processconfig"
        },
        "activeConfig": {
          "$ref": "#/definitions/Processconfig"
        },
        "soldOutConfig": {
          "$ref": "#/definitions/Processconfig"
        },
        "hasSizesConfig": {
          "$ref": "#/definitions/Processconfig"
        },
        "sizesConfig": {
          "$ref": "#/definitions/Processconfig"
        },
        "sizesSoldOutConfig": {
          "$ref": "#/definitions/Processconfig"
        },
        "childProductConfig": {
          "$ref": "#/definitions/Processconfig"
        }
      }
    },
    "Processconfig": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "hasConstant": {
          "type": "boolean"
        },
        "constant": {
          "type": "boolean"
        },
        "pipe": {
          "type": "array",
          "objects": {
            "$ref": "#/definitions/Pipeelement"
          }
        }
      }
    },
    "Pipeelement": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "command": {
          "type": "string"
        },
        "order": {
          "type": "number"
        }
      }
    },
    "UrlElement": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "url": {
          "type": "string"
        }
      }
    }
  }
}